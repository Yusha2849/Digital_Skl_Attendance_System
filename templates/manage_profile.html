<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Manage Profile</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>
  <body>
    <h1>Manage Profile</h1>
    <div class="box">
      <form method="POST" autocomplete="off">
        <h2>YOUR PROFILE INFORMATION</h2>

        {{ form.hidden_tag() }}
        <!-- This line ensures CSRF protection -->

        <!-- Display User Information -->
        <div class="inputBox">
          <label>Username:</label>
          <input
            type="text"
            value="{{ user.username }}"
            readonly
            class="form-control"
          />
        </div>

        <div class="inputBox">
          <label>First Name:</label>
          <input
            type="text"
            value="{{ user.first_name }}"
            readonly
            class="form-control"
          />
        </div>

        <div class="inputBox">
          <label>Last Name:</label>
          <input
            type="text"
            value="{{ user.last_name }}"
            readonly
            class="form-control"
          />
        </div>

        <div class="inputBox">
          <label>Email:</label>
          <input
            type="email"
            value="{{ user.email }}"
            readonly
            class="form-control"
          />
        </div>

        <div class="inputBox">
          <label>RSA ID Number:</label>
          <input
            type="text"
            value="{{ user.rsa_id_num }}"
            readonly
            class="form-control"
          />
        </div>

        {% if role in ['secretary', 'educator', 'parent'] %}
        <div class="inputBox">
          <label>Mobile Number:</label>
          <input
            type="text"
            value="{{ user.cell_number }}"
            readonly
            class="form-control"
          />
        </div>
        {% endif %}

        <hr />

        <!-- Change Password Section -->
        <h2>Change Password</h2>

        <div class="inputBox">
          <input
            type="password"
            name="current_password"
            class="form-control"
            placeholder="Current Password"
            required="required"
          />
          <span>Current Password</span>
          <i></i>
        </div>

        <div class="inputBox">
          <input
            type="password"
            name="new_password"
            class="form-control"
            placeholder="New Password"
            required="required"
          />
          <span>New Password</span>
          <i></i>
        </div>

        <div class="inputBox">
          <input
            type="password"
            name="confirm_password"
            class="form-control"
            placeholder="Confirm New Password"
            required="required"
          />
          <span>Confirm New Password</span>
          <i></i>
        </div>

        <div class="inputBox">
          <button type="submit" name="change_password" class="submit-button">
            Change Password
          </button>
          <!-- This generates the change password button -->
        </div>

        <hr />

        <!-- Update Mobile Number Section -->
        {% if role in ['secretary', 'educator', 'parent'] %}
        <h2>Update Mobile Number</h2>

        <div class="inputBox">
          <input
            type="text"
            name="mobile_number"
            class="form-control"
            placeholder="New Mobile Number"
            pattern="\d{10}"
            title="Mobile number must be exactly 10 digits"
            required="required"
          />
          <span>New Mobile Number</span>
          <i></i>
        </div>

        <div class="inputBox">
          <button type="submit" name="update_mobile" class="submit-button">
            Update Mobile Number
          </button>
          <!-- This generates the update mobile number button -->
        </div>
        {% endif %}
      </form>
    </div>
  </body>
</html>
